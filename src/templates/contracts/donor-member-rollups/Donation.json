{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Donation",
  "description": "Individual donation record from payment processors and fundraising systems",
  "required": ["id", "donorId", "amount", "fund", "date"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique donation identifier"
    },
    "donorId": {
      "type": "string", 
      "description": "Donor identifier (normalized across systems)"
    },
    "donorEmail": {
      "type": "string",
      "format": "email",
      "description": "Donor email address for matching"
    },
    "donorName": {
      "type": "string",
      "description": "Full name of donor"
    },
    "amount": {
      "type": "number",
      "minimum": 0,
      "description": "Donation amount in cents (base currency units)"
    },
    "currency": {
      "type": "string",
      "default": "USD",
      "description": "Currency code (ISO 4217)"
    },
    "fund": {
      "type": "string",
      "description": "Fund or program designation"
    },
    "fundType": {
      "type": "string",
      "enum": ["restricted", "unrestricted", "temporarily_restricted", "endowment"],
      "description": "Fund restriction type"
    },
    "date": {
      "type": "string",
      "format": "date",
      "description": "Date donation was received"
    },
    "processingDate": {
      "type": "string",
      "format": "date-time",
      "description": "When payment was processed"
    },
    "source": {
      "type": "string",
      "enum": ["stripe", "paypal", "classy", "givebutter", "donorbox", "check", "cash", "other"],
      "description": "Source payment processor or method"
    },
    "channel": {
      "type": "string",
      "enum": ["online", "event", "direct_mail", "phone", "grant", "bequest", "in_kind"],
      "description": "Donation channel or campaign type"
    },
    "campaign": {
      "type": "string",
      "description": "Campaign identifier or name"
    },
    "appeal": {
      "type": "string",
      "description": "Specific appeal or solicitation"
    },
    "paymentMethod": {
      "type": "string",
      "enum": ["credit_card", "bank_transfer", "paypal", "check", "cash", "stock", "cryptocurrency"],
      "description": "Payment method used"
    },
    "transactionId": {
      "type": "string",
      "description": "Transaction ID from payment processor"
    },
    "fees": {
      "type": "number",
      "minimum": 0,
      "description": "Processing fees in cents"
    },
    "netAmount": {
      "type": "number",
      "minimum": 0,
      "description": "Net amount after fees in cents"
    },
    "recurring": {
      "type": "boolean",
      "default": false,
      "description": "Whether this is a recurring donation"
    },
    "recurringSchedule": {
      "type": "string",
      "enum": ["weekly", "monthly", "quarterly", "annually"],
      "description": "Recurring donation schedule"
    },
    "isAnonymous": {
      "type": "boolean",
      "default": false,
      "description": "Whether donor requested anonymity"
    },
    "isTaxDeductible": {
      "type": "boolean",
      "default": true,
      "description": "Whether donation is tax deductible"
    },
    "acknowledgmentSent": {
      "type": "boolean",
      "default": false,
      "description": "Whether thank you/receipt was sent"
    },
    "acknowledgmentDate": {
      "type": "string",
      "format": "date",
      "description": "Date acknowledgment was sent"
    },
    "accountingEntry": {
      "type": "object",
      "description": "Accounting system reference",
      "properties": {
        "journalEntryId": {
          "type": "string",
          "description": "Journal entry ID in accounting system"
        },
        "account": {
          "type": "string",
          "description": "GL account number"
        },
        "posted": {
          "type": "boolean",
          "description": "Whether entry has been posted"
        },
        "postedDate": {
          "type": "string",
          "format": "date",
          "description": "Date entry was posted"
        }
      }
    },
    "donorData": {
      "type": "object",
      "description": "Additional donor information",
      "properties": {
        "address": {
          "type": "object",
          "properties": {
            "street": { "type": "string" },
            "city": { "type": "string" },
            "state": { "type": "string" },
            "zipCode": { "type": "string" },
            "country": { "type": "string" }
          }
        },
        "phone": { "type": "string" },
        "birthDate": { "type": "string", "format": "date" },
        "donorType": { 
          "type": "string",
          "enum": ["individual", "foundation", "corporation", "government", "other"]
        },
        "wealthRating": {
          "type": "string",
          "enum": ["A", "B", "C", "D", "unrated"]
        },
        "lifetimeGiving": {
          "type": "number",
          "minimum": 0,
          "description": "Lifetime giving total in cents"
        },
        "firstGiftDate": {
          "type": "string",
          "format": "date",
          "description": "Date of first gift"
        }
      }
    },
    "tributeInfo": {
      "type": "object",
      "description": "Memorial or honor gift information",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["memorial", "honor", "tribute"]
        },
        "honoree": { "type": "string" },
        "notifyName": { "type": "string" },
        "notifyAddress": { "type": "string" }
      }
    },
    "matchingGift": {
      "type": "object",
      "description": "Corporate matching gift information",
      "properties": {
        "company": { "type": "string" },
        "matchAmount": { "type": "number" },
        "matchRatio": { "type": "string" },
        "status": {
          "type": "string",
          "enum": ["pending", "submitted", "approved", "received", "declined"]
        }
      }
    },
    "grantInfo": {
      "type": "object",
      "description": "Grant-specific information",
      "properties": {
        "grantNumber": { "type": "string" },
        "grantPeriod": { "type": "string" },
        "reportingRequirements": { "type": "string" },
        "restrictions": { "type": "string" }
      }
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "When record was created"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time", 
      "description": "When record was last updated"
    },
    "metadata": {
      "type": "object",
      "description": "System-specific metadata",
      "properties": {
        "sourceSystem": {
          "type": "string",
          "description": "Origin system (stripe, neoncrm, etc.)"
        },
        "externalId": {
          "type": "string",
          "description": "ID in source system"
        },
        "importBatch": {
          "type": "string",
          "description": "Data import batch ID"
        },
        "dataQuality": {
          "type": "object",
          "properties": {
            "completeness": { "type": "number", "minimum": 0, "maximum": 100 },
            "confidence": { "type": "number", "minimum": 0, "maximum": 100 },
            "flags": {
              "type": "array",
              "items": { "type": "string" }
            }
          }
        }
      }
    }
  }
}